{"ast":null,"code":"const Rx = require('rxjs');\n\nmodule.exports = class Command {\n  get killable() {\n    return !!this.process;\n  }\n\n  constructor({\n    index,\n    name,\n    command,\n    prefixColor,\n    killProcess,\n    spawn,\n    spawnOpts\n  }) {\n    this.index = index;\n    this.name = name;\n    this.command = command;\n    this.prefixColor = prefixColor;\n    this.killProcess = killProcess;\n    this.spawn = spawn;\n    this.spawnOpts = spawnOpts;\n    this.error = new Rx.Subject();\n    this.close = new Rx.Subject();\n    this.stdout = new Rx.Subject();\n    this.stderr = new Rx.Subject();\n  }\n\n  start() {\n    const child = this.spawn(this.command, this.spawnOpts);\n    this.process = child;\n    this.pid = child.pid;\n    Rx.fromEvent(child, 'error').subscribe(event => {\n      this.process = undefined;\n      this.error.next(event);\n    });\n    Rx.fromEvent(child, 'close').subscribe(([exitCode, signal]) => {\n      this.process = undefined;\n      this.close.next(exitCode === null ? signal : exitCode);\n    });\n    child.stdout && pipeTo(Rx.fromEvent(child.stdout, 'data'), this.stdout);\n    child.stderr && pipeTo(Rx.fromEvent(child.stderr, 'data'), this.stderr);\n    this.stdin = child.stdin;\n  }\n\n  kill(code) {\n    if (this.killable) {\n      this.killProcess(this.pid, code);\n    }\n  }\n\n};\n\nfunction pipeTo(stream, subject) {\n  stream.subscribe(event => subject.next(event));\n}","map":{"version":3,"sources":["/Users/tylerlane/Documents/MondayApps/bookmarks/quickstart-react/node_modules/concurrently/src/command.js"],"names":["Rx","require","module","exports","Command","killable","process","constructor","index","name","command","prefixColor","killProcess","spawn","spawnOpts","error","Subject","close","stdout","stderr","start","child","pid","fromEvent","subscribe","event","undefined","next","exitCode","signal","pipeTo","stdin","kill","code","stream","subject"],"mappings":"AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,MAAD,CAAlB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,MAAMC,OAAN,CAAc;AAC3B,MAAIC,QAAJ,GAAe;AACX,WAAO,CAAC,CAAC,KAAKC,OAAd;AACH;;AAEDC,EAAAA,WAAW,CAAC;AAAEC,IAAAA,KAAF;AAASC,IAAAA,IAAT;AAAeC,IAAAA,OAAf;AAAwBC,IAAAA,WAAxB;AAAqCC,IAAAA,WAArC;AAAkDC,IAAAA,KAAlD;AAAyDC,IAAAA;AAAzD,GAAD,EAAuE;AAC9E,SAAKN,KAAL,GAAaA,KAAb;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AAEA,SAAKC,KAAL,GAAa,IAAIf,EAAE,CAACgB,OAAP,EAAb;AACA,SAAKC,KAAL,GAAa,IAAIjB,EAAE,CAACgB,OAAP,EAAb;AACA,SAAKE,MAAL,GAAc,IAAIlB,EAAE,CAACgB,OAAP,EAAd;AACA,SAAKG,MAAL,GAAc,IAAInB,EAAE,CAACgB,OAAP,EAAd;AACH;;AAEDI,EAAAA,KAAK,GAAG;AACJ,UAAMC,KAAK,GAAG,KAAKR,KAAL,CAAW,KAAKH,OAAhB,EAAyB,KAAKI,SAA9B,CAAd;AACA,SAAKR,OAAL,GAAee,KAAf;AACA,SAAKC,GAAL,GAAWD,KAAK,CAACC,GAAjB;AAEAtB,IAAAA,EAAE,CAACuB,SAAH,CAAaF,KAAb,EAAoB,OAApB,EAA6BG,SAA7B,CAAuCC,KAAK,IAAI;AAC5C,WAAKnB,OAAL,GAAeoB,SAAf;AACA,WAAKX,KAAL,CAAWY,IAAX,CAAgBF,KAAhB;AACH,KAHD;AAIAzB,IAAAA,EAAE,CAACuB,SAAH,CAAaF,KAAb,EAAoB,OAApB,EAA6BG,SAA7B,CAAuC,CAAC,CAACI,QAAD,EAAWC,MAAX,CAAD,KAAwB;AAC3D,WAAKvB,OAAL,GAAeoB,SAAf;AACA,WAAKT,KAAL,CAAWU,IAAX,CAAgBC,QAAQ,KAAK,IAAb,GAAoBC,MAApB,GAA6BD,QAA7C;AACH,KAHD;AAIAP,IAAAA,KAAK,CAACH,MAAN,IAAgBY,MAAM,CAAC9B,EAAE,CAACuB,SAAH,CAAaF,KAAK,CAACH,MAAnB,EAA2B,MAA3B,CAAD,EAAqC,KAAKA,MAA1C,CAAtB;AACAG,IAAAA,KAAK,CAACF,MAAN,IAAgBW,MAAM,CAAC9B,EAAE,CAACuB,SAAH,CAAaF,KAAK,CAACF,MAAnB,EAA2B,MAA3B,CAAD,EAAqC,KAAKA,MAA1C,CAAtB;AACA,SAAKY,KAAL,GAAaV,KAAK,CAACU,KAAnB;AACH;;AAEDC,EAAAA,IAAI,CAACC,IAAD,EAAO;AACP,QAAI,KAAK5B,QAAT,EAAmB;AACf,WAAKO,WAAL,CAAiB,KAAKU,GAAtB,EAA2BW,IAA3B;AACH;AACJ;;AA1C0B,CAA/B;;AA6CA,SAASH,MAAT,CAAgBI,MAAhB,EAAwBC,OAAxB,EAAiC;AAC7BD,EAAAA,MAAM,CAACV,SAAP,CAAiBC,KAAK,IAAIU,OAAO,CAACR,IAAR,CAAaF,KAAb,CAA1B;AACH","sourcesContent":["const Rx = require('rxjs');\n\nmodule.exports = class Command {\n    get killable() {\n        return !!this.process;\n    }\n\n    constructor({ index, name, command, prefixColor, killProcess, spawn, spawnOpts }) {\n        this.index = index;\n        this.name = name;\n        this.command = command;\n        this.prefixColor = prefixColor;\n        this.killProcess = killProcess;\n        this.spawn = spawn;\n        this.spawnOpts = spawnOpts;\n\n        this.error = new Rx.Subject();\n        this.close = new Rx.Subject();\n        this.stdout = new Rx.Subject();\n        this.stderr = new Rx.Subject();\n    }\n\n    start() {\n        const child = this.spawn(this.command, this.spawnOpts);\n        this.process = child;\n        this.pid = child.pid;\n\n        Rx.fromEvent(child, 'error').subscribe(event => {\n            this.process = undefined;\n            this.error.next(event);\n        });\n        Rx.fromEvent(child, 'close').subscribe(([exitCode, signal]) => {\n            this.process = undefined;\n            this.close.next(exitCode === null ? signal : exitCode);\n        });\n        child.stdout && pipeTo(Rx.fromEvent(child.stdout, 'data'), this.stdout);\n        child.stderr && pipeTo(Rx.fromEvent(child.stderr, 'data'), this.stderr);\n        this.stdin = child.stdin;\n    }\n\n    kill(code) {\n        if (this.killable) {\n            this.killProcess(this.pid, code);\n        }\n    }\n};\n\nfunction pipeTo(stream, subject) {\n    stream.subscribe(event => subject.next(event));\n}\n"]},"metadata":{},"sourceType":"script"}